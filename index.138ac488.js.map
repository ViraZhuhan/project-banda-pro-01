{"mappings":"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","sources":["src/js/weekly-trends.js","src/js/get-refs.js","src/js/modal.js","src/js/footer-modal.js"],"sourcesContent":["import Api from './api';\nimport getRefs from './get-refs';\n\nconst weeklyTrendsApi = new Api();\nconst refs = getRefs();\n\n// ======================================================\nfunction initRatings() {\n  if (refs.rating.length > 0) {\n    for (let index = 0; index < refs.rating.length; index++) {\n      const ratingElement = refs.rating[index];\n      initRating(ratingElement);\n    }\n  }\n}\n\nfunction initRating(rating) {\n  const ratingActive = rating.querySelector('.rating__active');\n  const ratingValue = rating.querySelector('.rating__value');\n  const ratingItems = rating.querySelectorAll('.rating__item');\n\n  ratingItems.forEach(item => {\n    item.addEventListener('click', () => {\n      ratingValue.innerHTML = item.value;\n      setRatingActiveWidth(ratingActive, ratingValue);\n    });\n  });\n  setRatingActiveWidth(ratingActive, ratingValue);\n}\n\nfunction setRatingActiveWidth(ratingActive, ratingValue) {\n  const ratingActiveWidth = ratingValue.innerHTML / 0.025;\n  ratingActive.style.width = `${ratingActiveWidth}%`;\n}\n// ===================================================\nasync function renderWeeklyTrends() {\n  try {\n    const data = await weeklyTrendsApi.weekTrends();\n    const movies = data.results.slice(0, 3);\n\n    const genres = await weeklyTrendsApi.fetchGenres();\n\n    const moviesElements = movies.map(movie => {\n      const { poster_path, title, vote_average, release_date, genre_ids } =\n        movie;\n\n      const voteAverage = vote_average;\n\n      const release = new Date(release_date).getFullYear();\n\n      const movieGenres = genres\n        .filter(genre => genre_ids.includes(genre.id))\n        .map(genre => genre.name);\n\n      const imageUrl = poster_path\n        ? `https://image.tmdb.org/t/p/w500/${poster_path}`\n        : 'https://via.placeholder.com/395x574?text=No+Image';\n\n      return `\n        <li class=\"article__item\">\n        <article>\n        <img class=\"article__img\" src=\"${imageUrl}\" alt=\"${title}\" width=\"395\" >\n          <div class=\"details\">\n            <p class=\"title__txt\">${title}</p>\n            <div class=\"wraper__details\">\n            <p class=\"movieGenres\">${movieGenres\n              .slice(0, 2)\n              .join(', ')} | ${release}</p>\n            \n            <div class=\"rating\">\n              <div class=\"rating__body\">\n              <div class=\"rating__active\" style=\"width: ${\n                voteAverage * 10\n              }%;\"></div>>\n                <div class=\"rating__items\">\n                  <input type=\"radio\" class=\"rating__item\" value=\"1\" name=\"rating\" />\n                  <input type=\"radio\" class=\"rating__item\" value=\"2\" name=\"rating\" />\n                  <input type=\"radio\" class=\"rating__item\" value=\"3\" name=\"rating\" />\n                  <input type=\"radio\" class=\"rating__item\" value=\"4\" name=\"rating\" />\n                  <input type=\"radio\" class=\"rating__item\" value=\"5\" name=\"rating\" />\n                </div>\n              </div>\n              <div class=\"rating__value\">${voteAverage}</div>\n            </div>\n            </div>\n          </div>\n        </article>\n          \n        </li>\n      `;\n    });\n\n    refs.wrapper.innerHTML = moviesElements.join('');\n    initRatings();\n  } catch (error) {\n    console.error(error);\n  }\n}\n\nrenderWeeklyTrends();\n","export default function getRefs() {\n  return {\n    rating: document.querySelectorAll('.rating'),\n    wrapper: document.querySelector('.article__list'),\n  };\n}\n\nconst refs = {\n  body: document.querySelector('body'),\n  closeModalBtn: document.querySelector('.modal__close-btn'),\n  modal: document.querySelector('.modal'),\n  backdrop: document.querySelector('.backdrop'),\n  footerLink: document.querySelector('.team__modal-open'),\n  footerBackdrop: document.querySelector('[data-action=\"deleted-class\"]'),\n  modalCloseBtn: document.querySelector('.footer-modal__close-btn'),\n  watchedBtn: document.querySelector('button[name=watched]'),\n};\n","import refs from './get-refs';\n\nrefs.closeModalBtn.addEventListener('click', onCloseModal);\nrefs.backdrop.addEventListener('click', onBackdropClick);\n\nfunction onCloseModal() {\n  window.removeEventListener('keydown', onEscBtnClick);\n  refs.backdrop.classList.add('is-hidden');\n  refs.body.style.overflow = 'visible';\n}\n\nfunction onBackdropClick(event) {\n  if (event.currentTarget === event.target) {\n    refs.backdrop.classList.add('is-hidden');\n    refs.body.style.overflow = 'visible';\n  }\n}\n\nexport default function onEscBtnClick(event) {\n  if (event.code === 'Escape') {\n    onCloseModal(event);\n  }\n}\n","import refs from './get-refs';\n\nconst onOpenFooterModal = event => {\n  event.preventDefault();\n  refs.footerBackdrop.classList.remove('is-hidden');\n  window.addEventListener('keydown', onCloseFooterModalOnEsc);\n  refs.body.style.overflow = 'hidden';\n};\n\nconst onCloseFooterModal = () => {\n  refs.footerBackdrop.classList.add('is-hidden');\n  window.removeEventListener('keydown', onCloseFooterModalOnEsc);\n  refs.body.style.overflow = 'visible';\n};\n\nconst onCloseModalOnBackdropClick = event => {\n  if (event.currentTarget === event.target) {\n    refs.footerBackdrop.classList.add('is-hidden');\n    refs.body.style.overflow = 'visible';\n  }\n};\n\nfunction onCloseFooterModalOnEsc(event) {\n  if (event.code === 'Escape') {\n    onCloseFooterModal();\n  }\n}\n\nrefs.footerBackdrop.addEventListener('click', onCloseModalOnBackdropClick);\nrefs.modalCloseBtn.addEventListener('click', onCloseFooterModal);\nrefs.footerLink.addEventListener('click', onOpenFooterModal);\n"],"names":["$bpxeT","parcelRequire","$28e87b1ff6534a73$export$2e2bcd8739ae039","rating","document","querySelectorAll","wrapper","querySelector","$fe3a3a1ac89f0559$var$weeklyTrendsApi","$b7ONl","default","$fe3a3a1ac89f0559$var$refs","$fe3a3a1ac89f0559$var$initRatings","length","index","$fe3a3a1ac89f0559$var$initRating","ratingActive","ratingValue","forEach","item","addEventListener","innerHTML","value","$fe3a3a1ac89f0559$var$setRatingActiveWidth","ratingActiveWidth","style","width","concat","$fe3a3a1ac89f0559$var$_renderWeeklyTrends","$parcel$interopDefault","$2TvXO","mark","_callee","data","movies","genres","moviesElements","weekTrends","_ctx","sent","results","slice","fetchGenres","map","movie","poster_path","title","vote_average","release_date","genre_ids","voteAverage","release","Date","getFullYear","movieGenres","filter","genre","includes","id","name","imageUrl","join","console","error","t0","apply","this","arguments","$40873ecf3c18e122$var$onCloseModal","window","removeEventListener","$40873ecf3c18e122$export$2e2bcd8739ae039","backdrop","classList","add","body","overflow","event","code","$fe3a3a1ac89f0559$var$renderWeeklyTrends","closeModalBtn","currentTarget","target","$364b163d2b622c7d$var$onCloseFooterModal","footerBackdrop","$364b163d2b622c7d$var$onCloseFooterModalOnEsc","modalCloseBtn","footerLink","preventDefault","remove"],"version":3,"file":"index.138ac488.js.map"}
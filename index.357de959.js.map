{"mappings":"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","sources":["src/js/get-refs.js","src/js/weekly-trends.js","src/js/api.js","src/js/modal-team.js"],"sourcesContent":["export default function getRefs() {\n  return {\n    rating: document.querySelectorAll('.rating'),\n    wrapper: document.querySelector('.article__list'),\n  };\n}\n\n\nexport default function getRefs () {\n    return {\n        rating: document.querySelectorAll('.rating'),\n        wrapper: document.querySelector('.article__list'),\n        gallery: document.querySelector('.gallery')\n      };\n}\n\nconst refs = {\n  body: document.querySelector('body'),\n  closeModalBtn: document.querySelector('.modal__close-btn'),\n  modal: document.querySelector('.modal'),\n  backdrop: document.querySelector('.backdrop'),\n  footerLink: document.querySelector('.team__modal-open'),\n  footerBackdrop: document.querySelector('[data-action=\"deleted-class\"]'),\n  modalCloseBtn: document.querySelector('.footer-modal__close-btn'),\n  watchedBtn: document.querySelector('button[name=watched]'),\n};\n\n","import Api from './api';\nimport getRefs from './get-refs';\n\nconst weeklyTrendsApi = new Api();\nconst refs = getRefs();\n\n// ======================================================\nfunction initRatings() {\n  if (refs.rating.length > 0) {\n    for (let index = 0; index < refs.rating.length; index++) {\n      const ratingElement = refs.rating[index];\n      initRating(ratingElement);\n    }\n  }\n}\n\nfunction initRating(rating) {\n  const ratingActive = rating.querySelector('.rating__active');\n  const ratingValue = rating.querySelector('.rating__value');\n  const ratingItems = rating.querySelectorAll('.rating__item');\n\n  ratingItems.forEach(item => {\n    item.addEventListener('click', () => {\n      ratingValue.innerHTML = item.value;\n      setRatingActiveWidth(ratingActive, ratingValue);\n    });\n  });\n  setRatingActiveWidth(ratingActive, ratingValue);\n}\n\nfunction setRatingActiveWidth(ratingActive, ratingValue) {\n  const ratingActiveWidth = ratingValue.innerHTML / 0.025;\n  ratingActive.style.width = `${ratingActiveWidth}%`;\n}\n// ===================================================\nasync function renderWeeklyTrends() {\n  try {\n    const data = await weeklyTrendsApi.weekTrends();\n    const movies = data.results.slice(0, 3);\n\n    const genres = await weeklyTrendsApi.fetchGenres();\n\n    const moviesElements = movies.map(movie => {\n      const { poster_path, title, vote_average, release_date, genre_ids } =\n        movie;\n\n      const voteAverage = vote_average;\n\n      const release = new Date(release_date).getFullYear();\n\n      const movieGenres = genres\n        .filter(genre => genre_ids.includes(genre.id))\n        .map(genre => genre.name);\n\n      const imageUrl = poster_path\n        ? `https://image.tmdb.org/t/p/w500/${poster_path}`\n        : 'https://via.placeholder.com/395x574?text=No+Image';\n\n      return `\n        <li class=\"article__item\">\n        <article>\n        <img class=\"article__img\" src=\"${imageUrl}\" alt=\"${title}\" width=\"395\" >\n          <div class=\"details\">\n            <p class=\"title__txt\">${title}</p>\n            <div class=\"wraper__details\">\n            <p class=\"movieGenres\">${movieGenres\n              .slice(0, 2)\n              .join(', ')} | ${release}</p>\n            \n            <div class=\"rating\">\n              <div class=\"rating__body\">\n              <div class=\"rating__active\" style=\"width: ${\n                voteAverage * 10\n              }%;\"></div>>\n                <div class=\"rating__items\">\n                  <input type=\"radio\" class=\"rating__item\" value=\"1\" name=\"rating\" />\n                  <input type=\"radio\" class=\"rating__item\" value=\"2\" name=\"rating\" />\n                  <input type=\"radio\" class=\"rating__item\" value=\"3\" name=\"rating\" />\n                  <input type=\"radio\" class=\"rating__item\" value=\"4\" name=\"rating\" />\n                  <input type=\"radio\" class=\"rating__item\" value=\"5\" name=\"rating\" />\n                </div>\n              </div>\n              <div class=\"rating__value\">${voteAverage}</div>\n            </div>\n            </div>\n          </div>\n        </article>\n          \n        </li>\n      `;\n    });\n\n    refs.wrapper.innerHTML = moviesElements.join('');\n    initRatings();\n  } catch (error) {\n    console.error(error);\n  }\n}\n\nrenderWeeklyTrends();\n","const MOVIE_URL = `https://api.themoviedb.org/3/`;\nconst API_KEY = '225e339996bc91260b33199c383c8881';\n\n// as looking by id\nconst example = `${MOVIE_URL}movie/550?api_key=${API_KEY}`;\n\n// all - movie - tv - person | week - day |\nconst dayRoute = `${MOVIE_URL}trending/all/dayRoute?api_key=${API_KEY}`;\nconst weekRoute = `${MOVIE_URL}trending/all/week?api_key=${API_KEY}`;\n\n// genres\nconst genresRoute = `${MOVIE_URL}/genre/movie/list?api_key=${API_KEY}`;\n\n// genres\nconst countriesRoute = `${MOVIE_URL}configuration/countries?api_key=${API_KEY}`;\n\n//\nconst upcoming = `${MOVIE_URL}all/upcoming?api_key=${API_KEY}`;;\n\nexport default class Api {\n  constructor() {\n    this.page = 1;\n  }\n\n  nextPage() {\n    this.page += 1;\n  }\n  prevPage() {\n    this.page -= 1;\n  }\n  setPage(value) {\n    this.page = value;\n  }\n  getCurrentPage() {\n    return this.page;\n  }\n  reset() {\n    this.page = 1;\n  }\n\n  async dayTrends() {\n    try {\n      const response = await fetch(`${dayRoute}&page=${this.page}`);\n      const data = await response.json();\n      return data;\n    } catch (error) {\n      throw new Error('Error fetching movie data: ' + error);\n    }\n  }\n\n  async weekTrends() {\n    try {\n      const response = await fetch(`${weekRoute}&page=${this.page}`);\n      const data = await response.json();\n      return data;\n    } catch (error) {\n      throw new Error('Error fetching movie data: ' + error);\n    }\n  }\n\n  async upcoming() {\n    try {\n      const response = await fetch(`${upcoming}&page=${this.page}`);\n      const data = await response.json();\n      return data;\n    } catch (error) {\n      throw new Error('Error fetching movie data: ' + error);\n    }\n  }\n\n    async getDetailsById(id) {\n    const str = `https://api.themoviedb.org/3/movie/${id}?api_key=${API_KEY}`;\n    await new Promise(r => setTimeout(r, 1000));\n    return fetch(str).then(res => res.json());\n  }\n\n  async fetchGenres() {\n    try {\n      const response = await fetch(genresRoute);\n      const data = await response.json();\n      return data.genres;\n    } catch (error) {\n      throw new Error('Error fetching genres data: ' + error);\n    }\n  }\n\n    async countries() {\n    await new Promise(r => setTimeout(r, 1000));\n    return fetch(`${countriesRoute}&page=${this.page}`).then(res => res.json());\n  }\n\n  async searhByNameYear(obj = {}) {\n    let str = `https://api.themoviedb.org/3/search/movie?api_key=${API_KEY}&language=en-US&include_adult=false`;\n\n    const keys = Object.keys(obj);\n\n    if (keys.length !== 0) {\n      for (const key of keys) {\n        if (\n          ((key === 'year' || key === 'query' || key === 'page') &&\n            obj[key]) !== null\n        ) {\n          str += `&${key}=${obj[key]}`;\n        }\n      }\n    }\n    await new Promise(r => setTimeout(r, 1000));\n    return fetch(str).then(res => res.json());\n  }\n\n}\n\n\n// export default class ApiServer {\n//   #API_KEY = '225e339996bc91260b33199c383c8881';\n//   #dayTops = 'https://api.themoviedb.org/3/trending/all/day?';\n//   #weekTops = 'https://api.themoviedb.org/3/trending/all/week?';\n//   #upcoming = 'https://api.themoviedb.org/3/all/upcoming?&language=en-US';\n\n//   constructor() {\n//     this.page = 1;\n//   }\n\n//   nextPage() {\n//     this.page += 1;\n//   }\n//   prevPage() {\n//     this.page -= 1;\n//   }\n//   setPage(value) {\n//     this.page = value;\n//   }\n//   getCurrentPage() {\n//     return this.page;\n//   }\n//   reset() {\n//     this.page = 1;\n//   }\n\n//   // [] для фильма дня\n//   async dayTrends() {\n//     await new Promise(r => setTimeout(r, 1000));\n//     return fetch(\n//       `${this.#dayTops}api_key=${this.#API_KEY}&page=${this.page}`\n//     ).then(res => res.json());\n//   }\n\n//   // [] для фильмов недели\n//   async weekTrends() {\n//     await new Promise(r => setTimeout(r, 1000));\n//     return fetch(\n//       `${this.#weekTops}api_key=${this.#API_KEY}&page=${this.page}`\n//     ).then(res => res.json());\n//   }\n\n//   // [] для новинок\n//   async upcoming() {\n//     await new Promise(r => setTimeout(r, 1000));\n//     return fetch(\n//       `${this.#upcoming}&api_key=${this.#API_KEY}&page=${this.page}`\n//     ).then(res => res.json());\n//   }\n\n//   // {} для модалки с полной инфо\n//   async getDetailsById(id) {\n//     const str = `https://api.themoviedb.org/3/movie/${id}?api_key=${\n//       this.#API_KEY\n//     }`;\n//     await new Promise(r => setTimeout(r, 1000));\n//     return fetch(str).then(res => res.json());\n//   }\n\n//   // [] список всех стран\n//   async countries() {\n//     const str = `https://api.themoviedb.org/3/configuration/countries?api_key=${\n//       this.#API_KEY\n//     }`;\n//     await new Promise(r => setTimeout(r, 1000));\n//     return fetch(str).then(res => res.json());\n//   }\n\n//   // [] список всех жанров\n//   async fetchGenres() {\n//     const str = `https://api.themoviedb.org/3/genre/movie/list?api_key=${\n//       this.#API_KEY\n//     }&language=en-US`;\n//     await new Promise(r => setTimeout(r, 1000));\n//     return fetch(str).then(res => res.json());\n//   }\n\n//   // [] поиск по назв, год, стр, принимает {query: string, year: int, page: int}\n//   // фильтровать по: | 'release_date' | 'genre_ids' | 'origin_country'(не везде)\n//   async searhByNameYear(obj = {}) {\n//     let str = `https://api.themoviedb.org/3/search/movie?api_key=${\n//       this.#API_KEY\n//     }&language=en-US&include_adult=false`;\n\n//     const keys = Object.keys(obj);\n\n//     if (keys.length !== 0) {\n//       for (const key of keys) {\n//         if (\n//           ((key === 'year' || key === 'query' || key === 'page') &&\n//             obj[key]) !== null\n//         ) {\n//           str += `&${key}=${obj[key]}`;\n//         }\n//       }\n//     }\n\n//     await new Promise(r => setTimeout(r, 1000));\n//     return fetch(str).then(res => res.json());\n//   }\n// }\n","const refs = {\n  openModal: document.querySelector('.open-modal-team'),\n  closeModal: document.querySelector('.close-modal-team'),\n  teamBackdrop: document.querySelector('.backdrop-modal'),\n  teamModal: document.getElementsByClassName('team__modal'),\n};\n\nif (refs.openModal) refs.openModal.addEventListener('click', openModalTeam);\nif (refs.closeModal) refs.closeModal.addEventListener('click', closeModalTeam);\n\nfunction openModalTeam(event) {\n  refs.teamBackdrop.classList.remove('team__backdrop--hidden');\n  document.addEventListener('keydown', onEscapeClose);\n  document.addEventListener('click', onBackdropClose);\n  refs.teamModal[0].classList.add('openModalAnimationTeam');\n  // document.body.style.overflow = 'hidden';\n}\n\nfunction closeModalTeam(event) {\n  refs.teamModal[0].classList.remove('closeModalAnimationTeam');\n  refs.teamBackdrop.classList.add('team__backdrop--hidden');\n  document.removeEventListener('keydown', onEscapeClose);\n  document.body.style.overflow = '';\n}\n\nfunction onEscapeClose(event) {\n  if (event.code === 'Escape') {\n    refs.teamModal[0].classList.remove('openModalAnimationTeam');\n    refs.teamModal[0].classList.add('closeModalAnimationTeam');\n    setTimeout(() => {\n      closeModalTeam();\n    }, 400);\n    closeModalTeam();\n  }\n}\n\nfunction onBackdropClose(event) {\n  if (event.target === refs.teamBackdrop) {\n    refs.teamModal[0].classList.remove('openModalAnimationTeam');\n    refs.teamModal[0].classList.add('closeModalAnimationTeam');\n    setTimeout(() => {\n      closeModalTeam();\n    }, 400);\n  }\n}\n"],"names":["document","querySelector","$d395fb91404b7f70$var$weeklyTrendsApi","nextPage","this","page","prevPage","setPage","value","getCurrentPage","reset","async","response","fetch","json","error","Error","id","str","Promise","r","setTimeout","then","res","genres","obj","keys","Object","length","key","constructor","$d395fb91404b7f70$var$refs","rating","querySelectorAll","wrapper","gallery","$d395fb91404b7f70$var$initRating","ratingActive","ratingValue","forEach","item","addEventListener","innerHTML","$d395fb91404b7f70$var$setRatingActiveWidth","ratingActiveWidth","style","width","movies","weekTrends","results","slice","fetchGenres","moviesElements","map","movie","poster_path","title","vote_average","release_date","genre_ids","voteAverage","release","Date","getFullYear","filter","genre","includes","name","join","index","$d395fb91404b7f70$var$initRatings","console","$d395fb91404b7f70$var$renderWeeklyTrends","$53c8cd70eab94c2b$var$refs","openModal","closeModal","teamBackdrop","teamModal","getElementsByClassName","$53c8cd70eab94c2b$var$closeModalTeam","event","classList","remove","add","removeEventListener","$53c8cd70eab94c2b$var$onEscapeClose","body","overflow","code","$53c8cd70eab94c2b$var$onBackdropClose","target"],"version":3,"file":"index.357de959.js.map"}
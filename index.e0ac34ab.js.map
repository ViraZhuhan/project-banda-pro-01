{"mappings":"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","sources":["src/index.js","src/js/upcoming.js","src/js/modal-team.js"],"sourcesContent":["// import weeklyTrends from './js/weekly-trends';\nimport header from './js/header';\nimport mobileMenu from './js/mobile-menu';\nimport themeToggle from './js/themeToggle';\nimport { fetchUpcomingMovie, renderUpcomingMovieCard } from './js/upcoming';\nimport createWeekTrendsCatalog from './js/createTrends';\nimport scrollUp from './js/scroll-up';\nimport modalTeam from './js/modal-team';\n\nimport modalMovie from './js/modal_movie';\n","import Api  from './api';\nconst refs = {\n  galleryOfNewMovies: document.querySelector('.upcoming__container'),\n}\nconst newMovies = new Api();\n\nfetchUpcomingMovie().then(renderUpcomingMovieCard)\n.catch(er =>console.log(er.message));\nrenderUpcomingMovieCard();\n\n\n\nexport function fetchUpcomingMovie(){ \nreturn newMovies.upcoming()\n}; \n\n\nexport async function renderUpcomingMovieCard(res){\n  try{\n  \nconst genres = await newMovies.fetchGenres();\nconst results = res.results.slice(0,1);\n\nconst createUpcomingCard = results.map(result => {const {backdrop_path, original_title, release_date, vote_average, vote_count, popularity, genre_ids, overview } = result\n  function getFormatDate(join){\n    join= join || ' '; // разделитель по дефолту\n    \n    const release = new Date(release_date); \n    return release.getDate() + join + release.getMonth() + join + release.getFullYear();  \n  }\n  // console.log(getFormatDate('.'));\n  \n  const idGenre = res.results[0].genre_ids;\n  \n  let nameGenres=[];\n  for(let i=0; i < idGenre.length; i+=1 ){\n    const item = genres.find(el => el.id === idGenre[i])\n    nameGenres.push(item.name);\n  }\n\n \n \n const data = results[0];\n const title = data.original_title;\n const key = title;\n//  const title = res.results[0].original_title;\n const imageUrl = data.backdrop_path\n ? `https://image.tmdb.org/t/p/w500/${data.backdrop_path}`\n : 'https://via.placeholder.com/395x574?text=No+Image'; \n const formatDate = getFormatDate('.');\n const voteAverage = res.results[0].vote_average;\n const voteCount = res.results[0].vote_count;\n const genreUp = nameGenres.slice(0, 2).join(', ');\n\n\nrefs.galleryOfNewMovies.innerHTML = ` <h2 class=\"upcoming__title\">Upcoming this month</h2>\n<div class=\"upcoming__info\"> \n<img src=\"https://image.tmdb.org/t/p/original/${imageUrl}\" alt=\"${title}\"  loading=\"lazy\" class=\"upcoming__img\" />\n<div class=\"upcoming__info-btn\">\n<div class=\"upcoming__info-layout\">\n<h3 class =\"upcoming__movie-title\"><span class=\"upcoming__item-font-title\">${title}</span></h3>\n<div class=\"upcoming__list-tablet\">\n<ul class=\"upcoming__list\">\n<li class =\"upcoming__item\"><span class=\"upcoming__item-font-date\">Release date</span><span class=\"upcoming__item-data\">${formatDate}</span></li>\n<li class =\"upcoming__item\"><span class=\"upcoming__item-font-vote\">Vote/Votes </span><span class=\"upcoming__item-vote\">${voteAverage}</span>  /  <span class=\"upcoming__item-votes\">${voteCount}</span></li>\n</ul>\n<ul class=\"upcoming__list\">\n<li class =\"upcoming__item\"><span class=\"upcoming__item-font-popularity\">Popularity </span><span class=\"upcoming__item-pop\">${popularity}</span></li>\n<li class =\"upcoming__item\"><span class=\"upcoming__item-font-genre\">Genre </span><span class=\"upcoming__item-genre\">${genreUp}</span></li>\n</ul>\n</div>\n<p class =\"upcoming__movie-about\">About</p>\n<p class=\"upcoming__item-font-about\">${overview}</p>\n</div>\n<button type=\"button\" class=\"upcoming__button\">Remind me</button>\n</div>\n</div>`;\nremindBtn = document.querySelector('.upcoming__button')\nremindBtn.addEventListener('click', addLS);\nconst KEY = 'LibraryMovie';\n\n const value = {\n  data: formatDate,\n  title: title,\n  popularity,\n  voteAverage,\n  img: imageUrl,\n  voteCount,\n  genres: genreUp,\n  overview,\n};\n// console.log(value);\n\n\nfunction addLS() { \n const arr = [];\n const saved = localStorage.getItem('LibraryMovie');\n \n console.log(saved)\n if( saved === null){\narr.push(value);\nlocalStorage.setItem('LibraryMovie', JSON.stringify(arr));\nremindBtn.disabled = true;\nremindBtn.style.backgraund = \"grey\";\n }\n else if(saved ==! null && arr.length >= 1){\n  remindBtn.disabled = true;\n  remindBtn.style.backgraund = \"grey\";\n }\n}\n});\n} catch{error => (console.log(error.message))};\n};\n","import getRefs from './components/get-refs';\n\nconst refs = getRefs();\n\nif (refs.openModal) refs.openModal.addEventListener('click', openModalTeam);\nif (refs.closeModal) refs.closeModal.addEventListener('click', closeModalTeam);\n\nfunction openModalTeam(event) {\n  refs.teamBackdrop.classList.remove('team__backdrop--hidden');\n  document.addEventListener('keydown', onEscapeClose);\n  document.addEventListener('click', onBackdropClose);\n  refs.teamModal[0].classList.add('openModalAnimationTeam');\n  // document.body.style.overflow = 'hidden';\n}\n\nfunction closeModalTeam(event) {\n  refs.teamModal[0].classList.remove('closeModalAnimationTeam');\n  refs.teamBackdrop.classList.add('team__backdrop--hidden');\n  document.removeEventListener('keydown', onEscapeClose);\n  document.body.style.overflow = '';\n}\n\nfunction onEscapeClose(event) {\n  if (event.code === 'Escape') {\n    refs.teamModal[0].classList.remove('openModalAnimationTeam');\n    refs.teamModal[0].classList.add('closeModalAnimationTeam');\n    setTimeout(() => {\n      closeModalTeam();\n    }, 400);\n    closeModalTeam();\n  }\n}\n\nfunction onBackdropClose(event) {\n  if (event.target === refs.teamBackdrop) {\n    refs.teamModal[0].classList.remove('openModalAnimationTeam');\n    refs.teamModal[0].classList.add('closeModalAnimationTeam');\n    setTimeout(() => {\n      closeModalTeam();\n    }, 400);\n  }\n}\n"],"names":["parcelRequire","$bpxeT","$4c6aab06649ec8ef$var$refs","galleryOfNewMovies","document","querySelector","$4c6aab06649ec8ef$var$newMovies","$b7ONl","default","$4c6aab06649ec8ef$export$b31ccb6f873ec7de","res","$4c6aab06649ec8ef$var$_renderUpcomingMovieCard","apply","this","arguments","$parcel$interopDefault","$2TvXO","mark","_callee","genres","results","fetchGenres","_ctx","sent","slice","map","result","item","find","el","id","idGenre","i","nameGenres","push","name","release_date","backdrop_path","original_title","popularity","vote_average","vote_count","overview","genre_ids","i1","length","_loop","data","title","imageUrl","concat","formatDate","join","release","Date","getDate","getMonth","getFullYear","getFormatDate","voteAverage","voteCount","genreUp","innerHTML","remindBtn","addEventListener","arr","saved","localStorage","getItem","console","log","value","setItem","JSON","stringify","disabled","style","backgraund","img","upcoming","then","catch","er","message","$7ffd53e14a5f2a85$var$refs","$7ffd53e14a5f2a85$var$closeModalTeam","event","teamModal","classList","remove","teamBackdrop","add","removeEventListener","$7ffd53e14a5f2a85$var$onEscapeClose","body","overflow","code","setTimeout","$7ffd53e14a5f2a85$var$onBackdropClose","target","openModal","closeModal"],"version":3,"file":"index.e0ac34ab.js.map"}
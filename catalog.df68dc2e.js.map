{"mappings":"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","sources":["src/catalog.js","src/js/modal_movie.js"],"sourcesContent":["import mobileMenu from './js/mobile-menu';\nimport themeToggle from './js/themeToggle';\nimport header from './js/header';\n// import seachcatalog from './js/seachcatalog';\nimport modalMovie from './js/modal_movie';\nimport scrollUp from './js/scroll-up';\nimport createWeekTrendsCatalog from './js/createTrends'\n","import Api from './api';\nconst api = new Api();\n\nconst refs = {\n  backdrop: document.querySelector('.backdrop'),\n  modal: document.querySelector('.modal'),\n  gallery: document.querySelector('.gallery'),\n};\nconst toggleModal = () => {\n  refs.backdrop.classList.toggle('hidden');\n};\n// ========================CLICK ESP=====================\n\nwindow.addEventListener('keydown', event => {\n  if (event.key === 'Escape') refs.backdrop.classList.add('hidden');\n});\n// ========================CLICK backdrop================\n\nrefs.backdrop.addEventListener('click', event => {\n  if (event.target.className === 'backdrop') {\n    toggleModal();\n  }\n});\n\n// ========================CLICK Open=====================\n\nrefs.gallery.addEventListener('click', event => {\n  toggleModal();\n  let idOfCard = event.target.closest('.gallery__item ').id;\n  modalMovie(idOfCard);\n});\n\n// ========================CLICK closed=====================\n\n// ========================================================\n\nexport async function modalMovie(id) {\n  try {\n    const data = await api.getDetailsById(id);\n    const idGenres = data.genres;\n    const newGenreMovie = [];\n    idGenres.map(elem => {\n      newGenreMovie.push(elem.name);\n    });\n\n    const voteAverage = data.vote_average.toFixed(2);\n    const popularity = data.popularity.toFixed(1);\n    const imageUrl = data.poster_path\n      ? `https://image.tmdb.org/t/p/w500/${data.poster_path}`\n      : 'https://via.placeholder.com/395x574?text=No+Image';\n\n    refs.modal.innerHTML = `\n    <img class=\"modal__img\" src=${imageUrl} alt=${\n      data.original_name\n    } loading=\"lazy\">\n    <div class=\"modal__items\">\n      <h1 class=\"modal__title\">${data.title}</h1>\n      <p class=\"modal__rating\">Vote / Votes\n        <span class=\"modal__rating_span\">\n          <span class=\"rating-vote\">${voteAverage}</span> /\n          <span class=\"rating-vote\">${data.vote_count}</span>\n        </span>\n      </p>\n      <p class=\"modal__popularity\">Popularity <span>${popularity}</span> </p>\n      <p class=\"modal__genre\">Genre <span>${newGenreMovie.join(' ')}</span></p>\n      <p class=\"modal__about\">ABOUT</p>\n      <p class=\"modal__description\">${data.overview}</p>\n      <button class=\"button-add\" type=\"button\"><span class=\"button-add__tex\">Add to my library</span> </button>\n      <button class=\"button-remove hidden\" type=\"button\"><span class=\"button-add__tex\">Remove from my library</span> </button>\n    </div>`;\n\n    const buttonAdd = document.querySelector('.button-add');\n    const buttonRemove = document.querySelector('.button-remove');\n    const closeModalBtn = document.querySelector('.button__close');\n\n    closeModalBtn.addEventListener('click', toggleModal);\n    buttonAdd.addEventListener('click', addLS);\n    buttonRemove.addEventListener('click', removeLS);\n\n    const KEY = 'LibraryMovie';\n    const movieItem = {\n      data: data.release_date,\n      id,\n      title: data.title,\n      popularity,\n      voteAverage,\n      img: imageUrl,\n      voteCount: data.vote_count,\n      genres: newGenreMovie,\n      overview: data.overview,\n    };\n    function addLS() {\n      let objects = JSON.parse(localStorage.getItem(KEY)) || [];\n      objects.push(movieItem);\n      localStorage.setItem(KEY, JSON.stringify(objects));\n      buttonAdd.classList.add('hidden');\n      buttonRemove.classList.remove('hidden');\n    }\n\n    function removeLS() {\n      let objects = JSON.parse(localStorage.getItem(KEY));\n      const indexMovie = objects.findIndex(obj => obj.id === id);\n      objects.splice(indexMovie, 1);\n      localStorage.setItem(KEY, JSON.stringify(objects));\n      buttonAdd.classList.remove('hidden');\n      buttonRemove.classList.add('hidden');\n    }\n    function ls() {\n      try {\n        const itemLs = localStorage.getItem(KEY);\n        const parceLS = null ? undefined : JSON.parse(itemLs);\n        if (parceLS === null) {\n          return;\n        }\n        parceLS.map(elm => {\n          if (elm.id === id) {\n            buttonAdd.classList.add('hidden');\n            buttonRemove.classList.remove('hidden');\n          }\n        });\n      } catch (error) {\n        console.error(error);\n      }\n    }\n    ls();\n  } catch (error) {\n    console.error(error);\n  }\n}\n"],"names":["parcelRequire","$bpxeT","$aff9d962eec10935$var$api","default","$aff9d962eec10935$var$refs","backdrop","document","querySelector","modal","gallery","$aff9d962eec10935$var$toggleModal","classList","toggle","$aff9d962eec10935$var$_modalMovie","$parcel$interopDefault","$2TvXO","mark","_callee","id","data","idGenres","newGenreMovie","voteAverage","popularity","imageUrl","buttonAdd","buttonRemove","KEY","movieItem","addLS","removeLS","ls","objects","JSON","parse","localStorage","getItem","push","setItem","stringify","add","remove","indexMovie","findIndex","obj","splice","itemLs","parceLS","map","elm","error","console","getDetailsById","_ctx","sent","genres","elem","name","vote_average","toFixed","poster_path","concat","innerHTML","original_name","title","vote_count","join","overview","addEventListener","release_date","img","voteCount","t0","apply","this","arguments","window","event","key","target","className","$aff9d962eec10935$export$f1348557528e4581","closest"],"version":3,"file":"catalog.df68dc2e.js.map"}
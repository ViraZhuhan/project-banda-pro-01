!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},a={},r=t.parcelRequire991f;null==r&&((r=function(e){if(e in n)return n[e].exports;if(e in a){var t=a[e];delete a[e];var r={id:e,exports:{}};return n[e]=r,t.call(r.exports,r,r.exports),r.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){a[e]=t},t.parcelRequire991f=r);(function(){console.log("hello");var e=document.querySelector(".mobile-menu"),t=document.querySelector(".header-menu"),n=document.querySelector(".menu-open"),a=document.getElementsByTagName("body")[0],r=document.querySelectorAll(".navigation-menu__link"),i=function(){var n="true"===t.getAttribute("aria-expanded")||!1;t.setAttribute("aria-expanded",!n),e.setAttribute("aria-hidden",n),t.classList.toggle("opened"),e.classList.toggle("is-hidden"),a.classList.toggle("scroll-block")};n.addEventListener("click",i),r.forEach((function(e){return e.addEventListener("click",i)})),e.addEventListener("click",(function(e){return e.target===e.currentTarget&&i()})),window.matchMedia("(min-width: 768px)").addEventListener("change",(function(n){n.matches&&(e.classList.add("is-hidden"),t.setAttribute("aria-expanded",!1),t.classList.remove("opened"),a.classList.remove("scroll-block"))}))})(),i=document.documentElement,o=localStorage.getItem("color-theme"),c=document.querySelector('.switch input[type="checkbox"]'),"light"===o&&(c.checked=!0),c.addEventListener("input",(function(){var e=i.className;i.className="dark"===e?"light":"dark",localStorage.setItem("color-theme",i.className)})),l=document.querySelectorAll(".navigation__link"),s=document.querySelectorAll(".navigation-menu__link"),d=window.location.href,l.forEach((function(e){e.href!==d?e.classList.remove("navigation__link--current"):e.classList.add("navigation__link--current")})),s.forEach((function(e){e.href!==d?e.classList.remove("navigation-menu__link--current"):e.classList.add("navigation-menu__link--current")}));var i,o,c,l,s,d,u=r("bpxeT"),m=r("2TvXO"),p=new(0,(f=r("b7ONl")).default),v={backdrop:document.querySelector(".backdrop"),modal:document.querySelector(".modal"),gallery:document.querySelector(".gallery")},g=function(){v.backdrop.classList.toggle("hidden")};function _(){return(_=e(u)(e(m).mark((function t(n){var a,r,i,o,c,l,s,d,u,_,y,f;return e(m).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _=function(){var e={data:a.release_date,id:n,title:a.title,popularity:l,voteAverage:c,img:s,voteCount:a.vote_count,genres:i,overview:a.overview};localStorage.setItem(o,JSON.stringify(e)),d.classList.add("hidden"),u.classList.remove("hidden")},y=function(){localStorage.removeItem(o),d.classList.remove("hidden"),u.classList.add("hidden")},f=function(){try{var e=localStorage.getItem(o);if(null===JSON.parse(e))return;d.classList.add("hidden"),u.classList.remove("hidden")}catch(e){console.error(e)}},e.prev=3,e.next=6,p.getDetailsById(n);case 6:a=e.sent,console.log(a),r=a.genres,i=[],r.map((function(e){i.push(e.name)})),o=a.title,c=a.vote_average.toFixed(2),l=a.popularity.toFixed(1),s=a.poster_path?"https://image.tmdb.org/t/p/w500/".concat(a.poster_path):"https://via.placeholder.com/395x574?text=No+Image",v.modal.innerHTML='\n    <img class="modal__img" src='.concat(s," alt=").concat(a.original_name,' loading="lazy">\n    <div class="modal__items">\n      <h1 class="modal__title">').concat(a.title,'</h1>\n      <p class="modal__rating">Vote / Votes\n        <span class="modal__rating_span">\n          <span class="rating-vote">').concat(c,'</span> /\n          <span class="rating-vote">').concat(a.vote_count,'</span>\n        </span>\n      </p>\n      <p class="modal__popularity">Popularity <span>').concat(l,'</span> </p>\n      <p class="modal__genre">Genre <span>').concat(i.join(" "),'</span></p>\n      <p class="modal__about">ABOUT</p>\n      <p class="modal__description">').concat(a.overview,'</p>\n      <button class="button-add" type="button"><span class="button-add__tex">Add to my library</span> </button>\n      <button class="button-remove hidden" type="button"><span class="button-add__tex">Remove from my library</span> </button>\n    </div>'),d=document.querySelector(".button-add"),u=document.querySelector(".button-remove"),document.querySelector(".button__close").addEventListener("click",g),d.addEventListener("click",_),u.addEventListener("click",y),f(),e.next=31;break;case 28:e.prev=28,e.t0=e.catch(3),console.error(e.t0);case 31:case"end":return e.stop()}}),t,null,[[3,28]])})))).apply(this,arguments)}window.addEventListener("keydown",(function(e){"Escape"===e.key&&v.backdrop.classList.add("hidden")})),v.backdrop.addEventListener("click",(function(e){"backdrop"===e.target.className&&g()})),v.gallery.addEventListener("click",(function(e){g(),function(e){_.apply(this,arguments)}(e.target.closest(".gallery__item ").id)}));var y=document.getElementById("scroll-up-btn");window.addEventListener("scroll",(function(){window.scrollY>20?y.style.display="block":y.style.display="none"})),y.addEventListener("click",(function(){window.scrollTo({top:0,behavior:"smooth"})}));u=r("bpxeT"),m=r("2TvXO");var f=r("b7ONl"),h=r("bi3kq");function b(){return{rating:document.querySelectorAll(".rating"),wrapper:document.querySelector(".article__list"),gallery:document.querySelector(".gallery")}}document.querySelector("body"),document.querySelector(".modal__close-btn"),document.querySelector(".modal"),document.querySelector(".backdrop"),document.querySelector(".team__modal-open"),document.querySelector('[data-action="deleted-class"]'),document.querySelector(".footer-modal__close-btn"),document.querySelector("button[name=watched]");var w=b();function k(){if(w.rating.length>0)for(var e=0;e<w.rating.length;e++){L(w.rating[e])}}function L(e){var t=e.querySelector(".rating__active"),n=e.querySelector(".rating__value");e.querySelectorAll(".rating__item").forEach((function(e){e.addEventListener("click",(function(){n.innerHTML=e.value,S(t,n)}))})),S(t,n)}function S(e,t){var n=t.innerHTML/.025;e.style.width="".concat(n,"%")}var q=[{id:28,name:"Action"},{id:12,name:"Adventure"},{id:16,name:"Animation"},{id:35,name:"Comedy"},{id:80,name:"Crime"},{id:99,name:"Documentary"},{id:18,name:"Drama"},{id:10751,name:"Family"},{id:14,name:"Fantasy"},{id:36,name:"History"},{id:27,name:"Horror"},{id:10402,name:"Music"},{id:9648,name:"Mystery"},{id:10749,name:"Romance"},{id:878,name:"Science Fiction"},{id:10770,name:"TV Movie"},{id:53,name:"Thriller"},{id:10752,name:"War"},{id:37,name:"Western"}],x=function(e){if(!Array.isArray(e))return"Unknown genre";var t=q.filter((function(t){var n=t.id;return e.includes(n)})).map((function(e){return e.name}));return t.length?t.length>2?"".concat(t.slice(0,2).join(", ")):t.join(", "):"Unknown genre"},E=b();function T(e){return e.map((function(e){var t=e.poster_path,n=e.title,a=e.vote_average,r=e.release_date,i=e.genre_ids,o=e.id,c=x(i),l=new Date(r).getFullYear(),s=t?"https://image.tmdb.org/t/p/w500/".concat(t):"https://via.placeholder.com/395x574?text=No+Image";return k(),'<li class="gallery__item" id=\''.concat(o,'\'>\n        <article>\n        <img class="gallery__img" src="').concat(s,'" alt="').concat(n,'" width="395" >\n          <div class="gallery__details">\n            <p class="details__title">').concat(n,'</p>\n            <div class="wraper__details">\n            <p class="movieGenres">').concat(c," | ").concat(l,'</p>\n             <div class="rating">\n              <div class="rating__body">\n              <div class="rating__active" style="width: ').concat(10*a,'%;"></div>>\n                <div class="rating__items">\n                  <input type="radio" class="rating__item" value="1" name="rating" />\n                  <input type="radio" class="rating__item" value="2" name="rating" />\n                  <input type="radio" class="rating__item" value="3" name="rating" />\n                  <input type="radio" class="rating__item" value="4" name="rating" />\n                  <input type="radio" class="rating__item" value="5" name="rating" />\n                </div>\n              </div>\n              <div class="rating__value">').concat(a,"</div>\n            </div>\n            </div>\n          </div>\n        </article>\n        </li>")}))}function A(e){N(),E.gallery.innerHTML=T(e).join("")}function N(){E.gallery.innerHTML=""}var M=new(0,f.default);function O(){return(O=e(u)(e(m).mark((function t(){return e(m).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M.weekTrends();case 3:A(e.sent.results.slice(0,10)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),h.noFilmError;case 10:case"end":return e.stop()}}),t,null,[[0,7]])})))).apply(this,arguments)}!function(){O.apply(this,arguments)}()}();
//# sourceMappingURL=catalog.2cfa2deb.js.map
